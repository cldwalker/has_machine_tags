<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: README.rdoc [RDoc Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='.././rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>README.rdoc</h1>
        <div class='paths'>
          README.rdoc
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Sun Mar 22 05:01:41 -0400 2009</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h2>Description</h2>
            <p>
            This plugin implements Flickr&#8217;s machine tags as explained <a
            href="http://www.flickr.com/groups/api/discuss/72157594497877875">here</a>
            while still maintaining standard tagging behavior.
            </p>
            <p>
            Basically, a machine tag has a namespace, a predicate and a value in the
            format
            </p>
            <pre>[namespace]:[predicate]=[value]</pre>
            <p>
            This allows for more precise tagging as tags can have unlimited contexts
            provided by combinations of namespaces and predicates. These unlimited
            contexts also make machine tags ripe for modeling relationships between
            objects. Read the <a
            href="../classes/HasMachineTags/TagMethods.html">HasMachineTags::TagMethods</a>
            class documentation for a more thorough explanation.
            </p>
            <p>
            A demo app using this plugin is <a
            href="http://github.com/cldwalker/tag-tree">here</a>.
            </p>
            <h2>Install</h2>
            <p>
            Install as a gem
            </p>
            <pre>bash&gt; gem install cldwalker-has_machine_tags -s http://gems.github.com&#x000A;&#x000A;# add in your environment.rb&#x000A;config.gem &quot;cldwalker-has_machine_tags&quot;, :source =&gt; &quot;http://gems.github.com&quot;, :lib =&gt; &quot;has_machine_tags&quot;</pre>
            <p>
            Or as a plugin
            </p>
            <pre>bash&gt; script/plugin install git://github.com/cldwalker/has_machine_tags.git</pre>
            <p>
            Migrate your database from Rails root:
            </p>
            <pre>bash&gt; script/generate has_machine_tags_migration&#x000A;bash&gt; rake db:migrate</pre>
            <h2>Usage</h2>
            <p>
            Setup a model to use has_machine_tags
            </p>
            <pre>class Url &lt; ActiveRecord::Base&#x000A;  has_machine_tags&#x000A;end</pre>
            <p>
            Let&#8217;s create some urls with machine tags!
            </p>
            <pre>url = Url.create(:name=&gt;&quot;http://github.com/cldwalker/has_machine_tags&quot;,&#x000A;  :tag_list=&gt;'gem:type=tagging,flickr')&#x000A;&#x000A;url2 = Url.create(:name=&gt;&quot;http://github.com/giraffesoft/is_taggable&quot;,&#x000A;  :tag_list=&gt;'gem:type=tagging, gem:user=giraffesoft')&#x000A;&#x000A;url3 = Url.create(:name=&gt;&quot;http://github.com/datamapper/data_mapper/tree/master&quot;,&#x000A;  :tag_list=&gt;'gem:type=orm')&#x000A;&#x000A;url.tag_list # =&gt; [&quot;gem:type=tagging&quot;, &quot;flickr&quot;]&#x000A;&#x000A;url.tags # =&gt; [&lt;Tag name:&quot;gem:type=tagging&quot;&gt;, &lt;Tag name:&quot;flickr&quot;&gt;]</pre>
            <p>
            Let&#8217;s query them:
            </p>
            <pre># Query urls tagged as a gem having type tagging&#x000A;Url.tagged_with 'gem:type=tagging'  # =&gt; [url, url2] from above&#x000A;&#x000A;# Non-machine tags work of course&#x000A;Url.tagged_with 'flickr'  # =&gt; [url] from above&#x000A;&#x000A;# tagged_with() is a named_scope so do your sweet chaining&#x000A;Url.tagged_with('flickr').yet_another_finder(:sweet).paginate(:per_page=&gt;30)</pre>
            <p>
            Nothing interesting so far. We could&#8217;ve done the same with normal
            tagging.
            </p>
            <p>
            But when we start with wildcard machine tag syntax, machine tags become
            more valuable:
            </p>
            <pre># Query urls tagged as gems (namespace = 'gem')&#x000A;Url.tagged_with 'gem:'  # =&gt; [url, url2, url3] from above&#x000A;&#x000A;# Query urls tagged as having a user, regardless of namespace and value (predicate = 'user')&#x000A;Url.tagged_with 'user='  # =&gt; [url2] from above&#x000A;&#x000A;# Query urls tagged as gems having a user ( namespace ='gem' AND predicate = 'user')&#x000A;Url.tagged_with 'gem:user'  # =&gt; [url2] from above&#x000A;&#x000A;# Query urls tagged as having a tagging value, regardless of namespace and predicate (value = 'tagging')&#x000A;Url.tagged_with '=tagging'  # =&gt; [url, url2] from above</pre>
            <p>
            More details on machine tag syntax can be found in the Tag class.
            </p>
            <h3>More Usage</h3>
            <p>
            The wildcard machine tag syntax can also be used to fetch tags:
            </p>
            <pre># Tags that are gems&#x000A;Tag.machine_tags 'gem:' # =&gt; [&lt;Tag name:&quot;gem:type=tagging&quot;&gt;, &lt;Tag name:&quot;gem:user=giraffesoft&quot;&gt;]&#x000A;&#x000A;# Tags that have a user predicate&#x000A;Tag.machine_tags 'user=' # =&gt; [&lt;Tag name:&quot;gem:user=giraffesoft&quot;&gt;]</pre>
            <p>
            Of course you can do the standard tag_list manipulation:
            </p>
            <pre>url.tag_list = &quot;comma, delimited&quot;&#x000A;url.save&#x000A;url.tag_list # =&gt;['comma', 'delimited']&#x000A;&#x000A;url.tag_list = ['or', 'an', 'array']&#x000A;url.save&#x000A;url.tag_list # =&gt;['or', 'an' 'array']&#x000A;&#x000A;#Add a tag&#x000A;url.tag_list &lt;&lt; 'another_tag'&#x000A;url.save&#x000A;url.tag_list # =&gt; [&quot;gem:type=tagging&quot;, &quot;flickr&quot;, &quot;another_tag']&#x000A;&#x000A;#Delete a tag&#x000A;url.tag_list.delete('another_tag')&#x000A;url.save&#x000A;url.tag_list # =&gt; [&quot;gem:type=tagging&quot;, &quot;flickr&quot;]</pre>
            <h2>Caveats</h2>
            <p>
            This is an experiment in progress so the api is subject to change.
            </p>
            <p>
            Since machine tags require special characters to implement its goodness,
            these characters are off limit unless used in the machine tag context:
            </p>
            <pre>'.', ':' , '*' , '=' , ','</pre>
            <h2>Todo</h2>
            <ul>
            <li>Add a match_all option to tagged_with().
            
            </li>
            <li>More helper methods ie for showing relations between namespaces, predicates
            + values
            
            </li>
            <li>Possible add support for other ORM&#8217;s ie DataMapper.
            
            </li>
            <li>Play friendly with other tagging plugins as needed.
            
            </li>
            </ul>
            <h2>Bugs</h2>
            <p>
            Please report them here: <a
            href="http://cldwalker.lighthouseapp.com/projects/27818-has_machine_tags/tickets.">cldwalker.lighthouseapp.com/projects/27818-has_machine_tags/tickets.</a>
            </p>
            <h2>Credits</h2>
            <p>
            Thanks goes to Flickr for popularizing this tagging model. Thanks also goes
            to the <a
            href="http://github.com/mbleigh/acts-as-taggable-on/tree/master">acts-as-taggable-on
            plugin</a> for their finder code and the <a
            href="http://github.com/giraffesoft/is_taggable/tree/master">is_taggable
            plugin</a> for demonstrating sane testing for a Rails plugin.
            </p>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
